---
layout: post
title:  "git怎样在删除远程分支的文件"
date:   2015-11-19 15:40:00
tags: [git,工具]
categories: 工具
author: btonylee
---

在开发工作中可能遇到这样的情况，有一些对生产环境来说无用的代码文件已经push到了远程分支。如何才能清理远程分支的这些代码呢。

如果这部分代码在本地已经没有用，可以简单的几步完成：

1. 在本地删除这些文件

2.  把文件名添加到.gitignore文件中

3.  提交+推送

如果这些文件在本地是有作用的，例如使用IDE生产的工程文件、编译生成的目标文件等，那就可以使用命令`git rm`来解决问题。
{% highlight bash %}
git rm --cached filename
{% endhighlight %}

用到命令选项`--cached`，表示只从索引中移除，并不对操作工作目录中的文件。

还可能会用到选项`-r`，表示递归删除目录中的文件。

{% highlight bash %}
Tony@MacBook:~/project/btonylee.github.io > git rm --cached .sass-cache
fatal: not removing '.sass-cache' recursively without -r

Tony@MacBook:~/project/btonylee.github.io > git rm -r  --cached .sass-cache
rm '.sass-cache/fb45c07f28c44c717cbcbcd66346f86afeabad93/_base.scssc'
rm '.sass-cache/fb45c07f28c44c717cbcbcd66346f86afeabad93/_layout.scssc'
rm '.sass-cache/fb45c07f28c44c717cbcbcd66346f86afeabad93/_syntax-highlighting.scssc'
rm '.sass-cache/fb45c07f28c44c717cbcbcd66346f86afeabad93/_syntax.scssc'

Tony@MacBook:~/project/btonylee.github.io> git rm --cached _site/*
rm '_site/feed.xml'
rm '_site/index.html'
{% endhighlight %}

上述操作完成之后，将希望忽略的文件加入到.gitignore文件中，在执行`git add --all`和`git commit -m "ignore"`就可以了。

