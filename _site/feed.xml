<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tony的博客</title>
    <description></description>
    <link>http://lituoweb.cn/</link>
    <atom:link href="http://lituoweb.cn/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 19 Dec 2015 11:29:43 +0800</pubDate>
    <lastBuildDate>Sat, 19 Dec 2015 11:29:43 +0800</lastBuildDate>
    <generator>Jekyll v2.4.0</generator>
    
      <item>
        <title>QEMU的使用和联合gdb调试</title>
        <description>&lt;p&gt;QEMU是一款虚拟机软件，可以运行在x86架构的操作系统（包括windows、linux和UNIX）上，作用是虚拟一个全新的操作系统。平常，我们更常用Virtual Box来虚拟系统，但是不可或缺的是，qemu可以与gdb联合调试，是在学习操作系统原理时的重要工具。&lt;/p&gt;

&lt;h3&gt;安装qemu&lt;/h3&gt;

&lt;p&gt;在上面提到的所有操作系统中，都可以通过编译代码的方式来安装qemu，具体可以参见&lt;a href=&quot;https://en.wikibooks.org/wiki/QEMU&quot;&gt;官方文档&lt;/a&gt;。
在Ubuntu上可以直接通过如下方式安装:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo apt-get install qemu&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;在Mac上也可以通过homebrew快速安装。&lt;/p&gt;

&lt;h3&gt;启动qemu&lt;/h3&gt;

&lt;p&gt;新安装qemu后可能会发现并不能找到qemu命令，但是可以找到qemu-system-i386，一般是在目录/usr/bin, 可以执行来建立软连接。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo ln -s /usr/bin/qemu-system-i386 /usr/bin/qemu&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;全部的命令参数可以参考&lt;a href=&quot;http://qemu.weilnetz.de/qemu-doc.html&quot;&gt;Qemu-doc&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;联合gdb调试&lt;/h3&gt;

&lt;p&gt;若要调试操作系统的内核代码，可以执行如下的命令&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;qemu -S -s -hda linux.img -D logfile -monitor stdio&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;简单解释一下上面几个参数，&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-S&lt;/code&gt;  等待 gdb 连接到端口 1234;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-s&lt;/code&gt; 在启动时不启动 CPU， 需要在 monitor 中输入 &amp;#39;c&amp;#39;，才能让qemu继续模拟工作;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-hda file&lt;/code&gt; &lt;code&gt;-hdb file&lt;/code&gt; &lt;code&gt;-hdc file&lt;/code&gt; &lt;code&gt;-hdd file&lt;/code&gt; 使用 file 作为硬盘0, 1, 2, 3镜像&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-d&lt;/code&gt; 输出日志到 logfile文件，不再是stderr&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-monitor dev&lt;/code&gt; 重定向 monitor 到主机设备 dev 中&lt;/p&gt;

&lt;p&gt;用gdb调试可以执行如下命令&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;file bar.o
target remote :1234
&lt;span class=&quot;nb&quot;&gt;break &lt;/span&gt;fooFunction
&lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 19 Nov 2015 06:18:00 +0800</pubDate>
        <link>http://lituoweb.cn/2015/11/19/qemu-instruction</link>
        <guid isPermaLink="true">http://lituoweb.cn/2015/11/19/qemu-instruction</guid>
        
        <category>QEMU</category>
        
        <category>操作系统</category>
        
        <category>gdb</category>
        
        
        <category>操作系统</category>
        
      </item>
    
      <item>
        <title>Welcome to Jekyll!</title>
        <description>&lt;p&gt;You&amp;#39;ll find this post in your &lt;code&gt;_posts&lt;/code&gt; directory - edit this post and re-build (or run with the &lt;code&gt;-w&lt;/code&gt; switch) to see your changes!
To add new posts, simply add a file in the &lt;code&gt;_posts&lt;/code&gt; directory that follows the convention: YYYY-MM-DD-name-of-post.ext.&lt;/p&gt;

&lt;p&gt;Jekyll also offers powerful support for code snippets:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Hi, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Tom&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#=&amp;gt; prints &amp;#39;Hi, Tom&amp;#39; to STDOUT.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Check out the &lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll docs&lt;/a&gt; for more info on how to get the most out of Jekyll. File all bugs/feature requests at &lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;Jekyll&amp;#39;s GitHub repo&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Sun, 10 Nov 2013 18:18:00 +0800</pubDate>
        <link>http://lituoweb.cn/2013/11/10/welcome-to-jekyll</link>
        <guid isPermaLink="true">http://lituoweb.cn/2013/11/10/welcome-to-jekyll</guid>
        
        
      </item>
    
  </channel>
</rss>
